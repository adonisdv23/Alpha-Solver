# NEW-026 · Distributed Tracing & Alerts

Implements distributed tracing helpers and an in-process alert manager.

### Tracing

* `service.otel` wires an OpenTelemetry tracer with an in-memory exporter.
* `span()` context manager redacts obvious PII and adds `latency_ms`.
* Span hierarchy covers router → gates → adapter with attributes:
  `request_id`, `tenant_id`, `decision`, `budget_verdict`, `cost_usd`, `tokens`.

### Alerts

* `AlertManager` tracks a rolling window of latencies.
* Rules:
  * p95 latency above target.
  * budget_over events.
* Alerts delivered via callback/log events.

### Tests

* Tracing coverage ≥95% of simulated requests, correct span tree and redaction.
* Alert rules fire for p95 breaches and budget_over, silent under thresholds.

